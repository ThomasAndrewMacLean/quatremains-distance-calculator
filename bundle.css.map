{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte"
  ],
  "sourcesContent": [
    "<script>\n    import { onMount } from 'svelte'\n    import { baseURL, quotes } from './constants.js'\n    import { getDateToday } from './functions.js'\n\n    export let namePiano\n    let selectedPiano\n    export let labels = {}\n    export let language\n    export let iframeId\n\n    //console.log(labels)\n    let quote = quotes[Math.floor(Math.random() * quotes.length)]\n\n    let formComplete = false\n    let partOneOfFormComplete = false\n    let loading = false\n    let showForm = false\n    let formData = {}\n    let price = 0\n    let priceDiscount = 0\n\n    let submitButton\n    let clickOnAddressError = false\n    let dateReserved = []\n    let allPianos = []\n\n    const checkAvailable = piano => {\n        fetch(baseURL + '/available/' + piano)\n            .then(x => x.json())\n            .then(data => (dateReserved = data))\n    }\n\n    if (namePiano) {\n        checkAvailable(namePiano)\n    } else {\n        fetch(baseURL + '/pianos')\n            .then(x => x.json())\n            .then(data => (allPianos = data.pianos))\n    }\n\n    const changeSelectedPiano = () => {\n        namePiano = allPianos[selectedPiano]\n\n        checkAvailable(namePiano)\n    }\n\n    let submit = e => {\n        e.preventDefault()\n        if (dateReserved.includes(date)) return\n\n        submitButton.disabled = true\n        loading = true\n        if (!partOneOfFormComplete) {\n            //console.log(formData)\n            fetch(baseURL + '/getDistance', {\n                method: 'POST',\n                headers: {\n                    'Access-Control-Allow-Origin': '*',\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    formData,\n                    piano: namePiano,\n                    prijsperkilometer: labels.prijsperkilometer,\n                    calculateDistance: !(labels.gratislevering || '')\n                        .split(';')\n                        .includes(formData.postcode),\n                }),\n            })\n                .then(y => y.json())\n                .then(x => {\n                    price = x.price\n                    priceDiscount = x.pricediscount\n                    formData.guid = x.guid\n                    submitButton.disabled = false\n                    loading = false\n                    partOneOfFormComplete = true\n                })\n                .catch(err => {\n                    throw new Error(err)\n                })\n        } else {\n            fetch(baseURL + '/rent', {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    formData,\n                    piano: namePiano,\n                    prijsperkilometer: labels.prijsperkilometer,\n                    calculateDistance: !(labels.gratislevering || '')\n                        .split(';')\n                        .includes(formData.postcode),\n                }),\n            })\n                .then(x => {\n                    if (x.status === 200) {\n                        submitButton.disabled = false\n                        loading = false\n                        formComplete = true\n\n                        fetch(baseURL + '/mail/' + language, {\n                            method: 'POST',\n                            headers: {\n                                Accept: 'application/json',\n                                'Content-Type': 'application/json',\n                            },\n                            body: JSON.stringify({\n                                formData,\n                                piano: namePiano,\n                                bevestigingsmail: labels.bevestigingsmail,\n                                template: labels.template,\n                                subject: labels.subject,\n                                prijsperkilometer: labels.prijsperkilometer,\n                                calculateDistance: !(\n                                    labels.gratislevering || ''\n                                )\n                                    .split(';')\n                                    .includes(formData.postcode),\n                            }),\n                        })\n\n                        fetch(baseURL + '/confirmmail/' + language, {\n                            method: 'POST',\n                            headers: {\n                                Accept: 'application/json',\n                                'Content-Type': 'application/json',\n                            },\n                            body: JSON.stringify({\n                                formData,\n                                piano: namePiano,\n                                bevestigingsmail: labels.bevestigingsmail,\n                                template: labels.template,\n                                subject: labels.subject,\n                                prijsperkilometer: labels.prijsperkilometer,\n                                calculateDistance: !(\n                                    labels.gratislevering || ''\n                                )\n                                    .split(';')\n                                    .includes(formData.postcode),\n                            }),\n                        })\n                    }\n                })\n                .catch(err => {\n                    throw new Error(err)\n                })\n        }\n    }\n</script>\n\n<style>\n    .piano-name {\n        font-weight: 100;\n    }\n    .input-row {\n        display: flex;\n        justify-content: space-between;\n    }\n    .input-wrap {\n        width: 47%;\n    }\n    .input-wrap.big {\n        width: 67%;\n    }\n    .input-wrap.full {\n        width: 100%;\n    }\n    .input-wrap.small {\n        width: 27%;\n    }\n    .input-row > .input-wrap:first-of-type {\n        margin-right: 6%;\n    }\n    .text-area-wrap {\n        width: 100%;\n    }\n    textarea {\n        width: 100%;\n        height: 150px;\n    }\n\n    h4 {\n        text-transform: uppercase;\n        color: var(--colour-gold);\n        font-family: 'Open Sans', sans-serif;\n        font-weight: 100;\n    }\n\n    .warning {\n        background: lightcoral;\n        position: absolute;\n        left: 0;\n        bottom: 0;\n        width: 150%;\n        text-align: center;\n    }\n\n    .date-input {\n        position: relative;\n    }\n\n    .loading {\n        width: 15px;\n        height: 15px;\n        display: inline-block;\n        border: 8px solid #fff;\n        border-radius: 50%;\n        animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        border-color: var(--colour-text) var(--colour-background)\n            var(--colour-text) var(--colour-background);\n    }\n\n    @keyframes lds-ring {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n\n<div>\n    {#if !showForm}\n        <button\n            on:click={() => {\n                showForm = true\n                window.top.postMessage('open' + iframeId, '*')\n            }}>\n            {labels.calculate || 'Calculate'}\n        </button>\n    {/if}\n    {#if showForm}\n        <div\n            class=\"backdrop\"\n            on:click={() => {\n                showForm = false\n                window.top.postMessage('close' + iframeId, '*')\n            }} />\n        <div\n            class=\"container modal\"\n            on:click={e => {\n                e.stopPropagation()\n            }}>\n            <span\n                class=\"close-button\"\n                on:click={() => {\n                    showForm = false\n                    window.top.postMessage('close' + iframeId, '*')\n                }}>\n                x\n            </span>\n            <header>\n                <h2>\n                    {labels.title || 'Rent the'}\n                    <span class=\"piano-name\">\n                        {namePiano.replace('-', ' ')}\n                    </span>\n                </h2>\n                <h4>\n                    {@html formComplete ? labels.summary || 'Summary' : labels.subtitle || 'FILL IN THIS FORM TO GET AN APPROXIMATION OF THE PRICE'}\n                </h4>\n            </header>\n\n            {#if !formComplete}\n                <main>\n                    <p class=\"mb-3\">\n                        {labels.intro || `Avoid unnecessary risk and let Quatre Mains handle transportation of your\n      precious piano. With utmost care we will transport your piano and if you\n      wish tune it at destination.`}\n                    </p>\n\n                    <form on:submit={submit}>\n\n                        {#if allPianos.length}\n                            <div class=\"input-wrap full\">\n                                <label for=\"piano\">\n                                    {labels.piano || 'Piano'}\n                                    <span>*</span>\n                                </label>\n                                <div class=\"select-wrap\">\n                                    <select\n                                        bind:value={selectedPiano}\n                                        required\n                                        id=\"piano\"\n                                        name=\"piano\"\n                                        on:change={() => changeSelectedPiano()}>\n                                        <option\n                                            hidden\n                                            label={labels.selectpiano || ''} />\n                                        {#each allPianos as p, index}\n                                            <option value={index}>{p}</option>\n                                        {/each}\n                                    </select>\n                                </div>\n                            </div>\n                        {/if}\n                        <h5>\n                            {labels.clientinformation || 'Client information'}\n                        </h5>\n                        <div class=\"input-row\">\n                            <div class=\"input-wrap\">\n                                <label for=\"firstname\">\n                                    {labels.firstname || 'First name'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.firstname}\n                                    name=\"firstname\"\n                                    type=\"text\"\n                                    id=\"firstname\"\n                                    required />\n                            </div>\n\n                            <div class=\"input-wrap\">\n                                <label for=\"lastname\">\n                                    {labels.lastname || 'Last name'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.lastname}\n                                    name=\"lastname\"\n                                    type=\"text\"\n                                    id=\"lastname\"\n                                    required />\n                            </div>\n                        </div>\n\n                        <div class=\"input-row\">\n\n                            <div class=\"input-wrap\">\n                                <label for=\"email\">\n                                    {labels.email || 'Email'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.email}\n                                    name=\"email\"\n                                    type=\"email\"\n                                    id=\"email\"\n                                    autocomplete=\"email\"\n                                    required />\n                            </div>\n\n                            <div class=\"input-wrap\">\n                                <label for=\"company\">\n                                    {labels.company || 'Company'}\n                                </label>\n                                <input\n                                    bind:value={formData.company}\n                                    name=\"company\"\n                                    type=\"text\"\n                                    id=\"company\" />\n                            </div>\n                        </div>\n\n                        <h5>\n                            {labels.eventinformation || 'Event information'}\n                        </h5>\n                        <div class=\"input-row\">\n                            <div class=\"input-wrap date-input\">\n                                <label for=\"date\">\n                                    {labels.date || 'Date'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.date}\n                                    name=\"date\"\n                                    type=\"date\"\n                                    lang=\"nl\"\n                                    id=\"date\"\n                                    placeholder=\"dd/mm/yyyy\"\n                                    min={getDateToday()}\n                                    required />\n                                {#if dateReserved.includes(formData.date)}\n                                    <span class=\"warning\">\n                                        {labels.unavailable || 'Piano not available on this date'}\n                                    </span>\n                                {/if}\n                            </div>\n                        </div>\n\n                        <div class=\"input-row\">\n                            <div class=\"input-wrap big\">\n                                <label for=\"street\">\n                                    {labels.street || 'Street'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.street}\n                                    name=\"street\"\n                                    type=\"text\"\n                                    id=\"street\"\n                                    required />\n\n                            </div>\n                            <div class=\"input-wrap small\">\n                                <label for=\"number\">\n                                    {labels.number || 'Number'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.number}\n                                    name=\"number\"\n                                    type=\"text\"\n                                    id=\"number\"\n                                    required />\n\n                            </div>\n                        </div>\n                        <div class=\"input-row\">\n                            <div class=\"input-wrap small\">\n                                <label for=\"postcode\">\n                                    {labels.postcode || 'Postcode'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.postcode}\n                                    name=\"postcode\"\n                                    type=\"text\"\n                                    id=\"postcode\"\n                                    required />\n\n                            </div>\n                            <div class=\"input-wrap big\">\n                                <label for=\"city\">\n                                    {labels.city || 'City'}\n                                    <span>*</span>\n                                </label>\n                                <input\n                                    bind:value={formData.city}\n                                    name=\"city\"\n                                    type=\"text\"\n                                    id=\"city\"\n                                    required />\n\n                            </div>\n                        </div>\n                        {#if price}\n                            <span class=\"price-wrap\">\n                                {#if priceDiscount}\n                                    <span class=\"discount price\">\n                                        {Math.ceil(price)}\n                                    </span>\n                                {/if}\n                                <span class=\"price\">\n                                    {priceDiscount ? Math.ceil(priceDiscount) : Math.ceil(price)}\n                                </span>\n                                <span class=\"price-excl\">\n                                    {priceDiscount ? Math.ceil(priceDiscount * 1.21) : Math.ceil(price * 1.21)}\n                                    incl.)\n                                </span>\n                            </span>\n                        {/if}\n\n                        {#if partOneOfFormComplete}\n                            <h4>\n                                {labels.fillindetails || 'Fill in the rest of these details to rent the instrument.'}\n                            </h4>\n\n                            <div class=\"input-row\">\n                                <div class=\"input-wrap\">\n                                    <label for=\"telephone\">\n                                        {labels.telephone || 'Telephone'}\n                                        <span>*</span>\n                                    </label>\n                                    <input\n                                        bind:value={formData.telephone}\n                                        name=\"telephone\"\n                                        type=\"telephone\"\n                                        id=\"telephone\"\n                                        required />\n                                </div>\n\n                            </div>\n\n                            <div class=\"input-row\">\n                                <div class=\"text-area-wrap\">\n                                    <label for=\"message\">\n                                        {labels.message || 'Message'}\n                                        <span>*</span>\n                                    </label>\n                                    <textarea\n                                        bind:value={formData.message}\n                                        id=\"message\"\n                                        name=\"message\"\n                                        required />\n                                </div>\n\n                            </div>\n                        {/if}\n\n                        <div class=\"button-wrap\">\n                            <button\n                                bind:this={submitButton}\n                                class={dateReserved.includes(formData.date) ? 'disabled' : ''}\n                                type=\"submit\"\n                                id=\"calculate-button\">\n                                {#if loading}\n                                    <div class=\"loading\" />\n                                {/if}\n                                {partOneOfFormComplete ? labels.rent || 'Rent' : labels.calculate || 'Calculate'}\n                            </button>\n                            <button\n                                type=\"button\"\n                                class=\"secondary-btn\"\n                                on:click={() => {\n                                    showForm = false\n                                    window.top.postMessage('close' + iframeId, '*')\n                                }}>\n                                {labels.cancel || 'Cancel'}\n                            </button>\n                        </div>\n                    </form>\n\n                </main>\n            {/if}\n            {#if formComplete}\n                <main>\n                    <ul>\n                        <li>{namePiano.replace('-', ' ')}</li>\n                        <li>\n                            {Intl.DateTimeFormat('nl-be').format(new Date(formData.date || '2019-10-30'))}\n                        </li>\n                        <li>\n                            {formData.street} {formData.number}\n                            {formData.postcode} {formData.city}\n                        </li>\n                    </ul>\n\n                </main>\n                <!-- <footer>\n            <div>\n                <p>{quote.q}</p>\n                <span class=\"quote-author\">{quote.a}</span>\n            </div>\n        </footer> -->\n            {/if}\n\n            <div class=\"disclaimer\">\n                {@html labels.disclaimer || ''}\n            </div>\n\n        </div>\n    {/if}\n</div>\n"
  ],
  "names": [],
  "mappings": "AA4JI,WAAW,cAAC,CAAC,AACT,WAAW,CAAE,GAAG,AACpB,CAAC,AACD,UAAU,cAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,AAClC,CAAC,AACD,WAAW,cAAC,CAAC,AACT,KAAK,CAAE,GAAG,AACd,CAAC,AACD,WAAW,IAAI,cAAC,CAAC,AACb,KAAK,CAAE,GAAG,AACd,CAAC,AACD,WAAW,KAAK,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,AACf,CAAC,AACD,WAAW,MAAM,cAAC,CAAC,AACf,KAAK,CAAE,GAAG,AACd,CAAC,AACD,wBAAU,CAAG,yBAAW,cAAc,AAAC,CAAC,AACpC,YAAY,CAAE,EAAE,AACpB,CAAC,AACD,eAAe,cAAC,CAAC,AACb,KAAK,CAAE,IAAI,AACf,CAAC,AACD,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,AACjB,CAAC,AAED,EAAE,cAAC,CAAC,AACA,cAAc,CAAE,SAAS,CACzB,KAAK,CAAE,IAAI,aAAa,CAAC,CACzB,WAAW,CAAE,WAAW,CAAC,CAAC,UAAU,CACpC,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,QAAQ,cAAC,CAAC,AACN,UAAU,CAAE,UAAU,CACtB,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,CAAC,CACP,MAAM,CAAE,CAAC,CACT,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,WAAW,cAAC,CAAC,AACT,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,QAAQ,cAAC,CAAC,AACN,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,YAAY,CACrB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,sBAAQ,CAAC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAC9D,YAAY,CAAE,IAAI,aAAa,CAAC,CAAC,IAAI,mBAAmB,CAAC;YACrD,IAAI,aAAa,CAAC,CAAC,IAAI,mBAAmB,CAAC,AACnD,CAAC,AAED,WAAW,sBAAS,CAAC,AACjB,EAAE,AAAC,CAAC,AACA,SAAS,CAAE,OAAO,IAAI,CAAC,AAC3B,CAAC,AACD,IAAI,AAAC,CAAC,AACF,SAAS,CAAE,OAAO,MAAM,CAAC,AAC7B,CAAC,AACL,CAAC"
}